<!DOCTYPE html>
<html lang="zh">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="https://air.googol.im/post/call-c-in-golang/" />
  <link rel="next" href="https://air.googol.im/post/how-to-save-password/" />
  <link rel="canonical" href="https://air.googol.im/post/ruby-style/" />
  <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Christian Neukirchen 的 Ruby 编程风格指南 | Air on G
       
  </title>
  <meta name="title" content="Christian Neukirchen 的 Ruby 编程风格指南 | Air on G">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Christian Neukirchen 的 Ruby 编程风格指南"/>
<meta name="twitter:description" content="也许你不会同意本文提到的所有规则，但是这些规则确实帮助我产生了高质量的代码，对我来说很有用。任何人都可以随其所想，根据其自己的编码风格去写代码，但是，当你提代码到我的项目里时，请遵守这些规则："/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Christian Neukirchen 的 Ruby 编程风格指南",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/air.googol.im\/post\/ruby-style\/"
  },
  "image": {
    "@type": "ImageObject",
    "url": "https:\/\/air.googol.im\/cover.png",
    "width":  800 ,
    "height":  600 
  },
  "genre": "post",
  "keywords": "ruby, code style",
  "wordcount":  1704 ,
  "url": "https:\/\/air.googol.im\/post\/ruby-style\/",
  "datePublished": "2011-02-20T20:00:00\u002b08:00",
  "dateModified": "2011-02-20T20:00:00\u002b08:00",
  "license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.",
  "publisher": {
    "@type": "Organization",
    "name": "Googol Lee",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/air.googol.im\/logo.png",
      "width":  127 ,
      "height":  40 
    }
  },
  "author": {
    "@type": "Person",
    "name": "Googol Lee"
  },
  "description": ""
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="https://air.googol.im">Air on G</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/post" title="">Blog</a>
                
                <a class="menu-item" href="/categories" title="">Categories</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="https://air.googol.im">Air on G</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/post" title="">Blog</a>
                
                <a class="menu-item" href="/categories" title="">Categories</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title">Christian Neukirchen 的 Ruby 编程风格指南</h1>
        <div class="post-meta">
              <a href="https://air.googol.im" rel="author">Googol Lee</a>  ♥ 
                <span class="post-time">
                     <time datetime=2011-02-20 >2011-02-20</time>
                </span>
                
                
                <i class="iconfont icon-timer"></i>
                4 min
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <p>也许你不会同意本文提到的所有规则，但是这些规则确实帮助我产生了高质量的代码，对我来说很有用。任何人都可以随其所想，根据其自己的编码风格去写代码，但是，当你提代码到我的项目里时，请遵守这些规则：</p>
<p>译自：<a href="https://github.com/chneukirchen/styleguide">https://github.com/chneukirchen/styleguide</a></p>
<p>中文版：<a href="https://github.com/googollee/styleguide">https://github.com/googollee/styleguide</a></p>
<h2 id="格式">格式：</h2>
<ul>
<li>
<p>使用 ASCII（或者 UTF-8，如果你不得不用的话）。</p>
</li>
<li>
<p>使用2个空格做缩进，不要用 tab。</p>
</li>
<li>
<p>使用 Unix 风格的换行做行尾。</p>
</li>
<li>
<p>在操作符两边，逗号、冒号、分号的后面，{ 的两侧和 } 的前面，加入空格。</p>
</li>
<li>
<p>在 (、[ 之后和 ]、) 之前没有空格。</p>
</li>
<li>
<p>在声明修饰符前加入两个空格（在 if/unless/while/until/rescue 的后面）</p>
</li>
<li>
<p>按照情形进行缩进，不要过多缩进。</p>
</li>
<li>
<p>在方法的 return 语句前留一个空行（除非只有一行），在 def 前后都留一个
空行。</p>
</li>
<li>
<p>使用 RDoc 及其约定来写 API 文档。不要在注释块和 def 间留任何空行。</p>
</li>
<li>
<p>使用空行，将一个很长的方法按逻辑分段。</p>
</li>
<li>
<p>每行不要超过80个字符。</p>
</li>
<li>
<p>杜绝行尾空格。</p>
</li>
</ul>
<h2 id="语法">语法：</h2>
<ul>
<li>
<p>如果有参数时，def 后面要用括号包住参数。</p>
</li>
<li>
<p>永远不要用 for，除非你确确实实知道你在做啥。</p>
</li>
<li>
<p>永远不要用 then 。</p>
</li>
<li>
<p>在条件语句只有一行的情况下，使用 when x; &hellip;</p>
</li>
<li>
<p>在布尔表达式里使用 &amp;&amp;/||，在程序流程控制里使用 and/or。（小提示：如果你不得不在最外层加括号，那你就用错操作符了。）</p>
</li>
<li>
<p>杜绝多行使用 ?: ，多行的情况下应该用 if 。</p>
</li>
<li>
<p>在调用方法的时候，绝不能使用多余的括号（参数最外面不用括号），但是在调用“函数”时使用括号，比如，当你在一行里需要使用函数的返回值。</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">Math</span><span style="color:#f92672">.</span>sin(y)
    array<span style="color:#f92672">.</span>delete e
</code></pre></div><ul>
<li>
<p>使用 {&hellip;} 好过 do&hellip;end 。多行情况使用 {&hellip;} 也很好：可以用不同的结束符标识不同的内容（用 } 标识块，而 end 标识 if/while/&hellip; ），这样可以很容易看出到哪里结束。不过在“程序流程控制”和“定义方法”时使用 do&hellip;end（比如，在 Rakefiles 和特定的 DSL 里）。在链式调用时杜绝 do&hellip;end 。</p>
</li>
<li>
<p>杜绝无谓的 return。</p>
</li>
<li>
<p>杜绝无谓的续行符（\）。</p>
</li>
<li>
<p>可以直接使用 = 运算符返回的值：</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">    <span style="color:#66d9ef">if</span> v <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span>grep(<span style="color:#e6db74">/foo/</span>) <span style="color:#f92672">...</span>
</code></pre></div><ul>
<li>
<p>请自由使用 ||=。</p>
</li>
<li>
<p>使用非 OO 风格的正则表达式（ OO 风格不会让你的代码变得更好）。在需要的时候，自由使用 =~，$0-9，$` 和 $'。</p>
</li>
</ul>
<h2 id="命名">命名：</h2>
<ul>
<li>
<p>方法名使用 snake_case 风格。</p>
</li>
<li>
<p>类名和模块名使用 CamelCase 风格。（常用首字母缩写保持大写，比如HTTP，RFC，XML）</p>
</li>
<li>
<p>其他常量使用 SCREAMING_SNAKE_CASE 。</p>
</li>
<li>
<p>标识符名字的长度决定了其生存周期。在短小的块/方法里，使用单字母变量作为参数，具体名字如下：</p>
<ul>
<li>a,b,c：任意对象</li>
<li>d：目录名字</li>
<li>e：Enumerable的元素</li>
<li>ex：截获的异常</li>
<li>f：文件对象和文件名</li>
<li>i,j：索引</li>
<li>k：哈希项的键值部分</li>
<li>m：方法</li>
<li>o：任意对象</li>
<li>r：短函数的返回值</li>
<li>s：字符串</li>
<li>v：任意值</li>
<li>v：哈希项的值部分（和上面一个有毛区别啊！）</li>
<li>x,y,z：数字</li>
</ul>
<p>另外，通常来说，如果使用变量时，其值的所有对象都是某个类型，用类名的首字母来表示。</p>
</li>
<li>
<p>对用不到的变量，使用 _ 或者用 _ 做前缀的名字。</p>
</li>
<li>
<p>当使用带有短块的注入时，对变量命名 |a, e|（方便助记：累加，元素）</p>
</li>
<li>
<p>当定义二值操作符时，将第二个参数命名为“other”。</p>
</li>
<li>
<p>优先使用 map 而不是 collect ，优先使用 find 而不是 detect ，优先使用 find_all 而不是 select ，优先使用 size 而不是 length 。</p>
</li>
</ul>
<h2 id="注释">注释：</h2>
<ul>
<li>
<p>比一个单词长的注释，每句话要首字母大写，并且使用标点。每段后用两个空格分隔。</p>
</li>
<li>
<p>杜绝在注释里灌水。</p>
</li>
</ul>
<h2 id="其他">其他：</h2>
<ul>
<li>
<p>写对 ruby -w 安全的代码。</p>
</li>
<li>
<p>杜绝将哈希表作为可选参数的行为。这个方法是不是干的事情太多了？</p>
</li>
<li>
<p>杜绝过长的方法。</p>
</li>
<li>
<p>杜绝太长的参数列表。</p>
</li>
<li>
<p>使用 def self.method 这种方式定义单例（singleton）方法。</p>
</li>
<li>
<p>将“全局”方法加入到 Kernel （如果你不得不写“全局”方法的话），并将其设为私有的。</p>
</li>
<li>
<p>如果 alias_method 可以做，就不要使用 alias 。</p>
</li>
<li>
<p>使用 OptionParser 来解析复杂的命令行参数，并用 ruby -s 明确指定命令行参数。</p>
</li>
<li>
<p>在1.8下编码，但不要做任何可能导致在1.9下不可用的事情。（那直接用1.9不就行了）</p>
</li>
<li>
<p>杜绝没用的元编程。</p>
</li>
</ul>
<h2 id="一般">一般：</h2>
<ul>
<li>
<p>用函数编程的方式写代码，如果可行的话就杜绝可变量。</p>
</li>
<li>
<p>除非函数的意图就是改变参数值，否则不要这么做。</p>
</li>
<li>
<p>写库的时候，不要把核心类弄乱。</p>
</li>
<li>
<p>不要使用防御式编程。（参见 <a href="1http://www.erlang.se/doc/programming_rules.shtml#HDR11">http://www.erlang.se/doc/programming_rules.shtml#HDR1</a> ）</p>
</li>
<li>
<p>保持代码简单。</p>
</li>
<li>
<p>别做过度设计。</p>
</li>
<li>
<p>也别不设计。</p>
</li>
<li>
<p>杜绝 bugs。（别逗了！）</p>
</li>
<li>
<p>阅读其他的风格指导，并且接受与本指导不冲突的部分。</p>
</li>
<li>
<p>保持前后一致。</p>
</li>
<li>
<p>使用常识。</p>
</li>
</ul>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>:</span>
                <span>Googol Lee </span>
                </p>
            
           
            <p class="copyright-item">
                    <span>:</span>
                   <span>1704</span>
            </p>

            <p class="copyright-item">
                
                <span>:</span>
                <span>

      
        <a href="//twitter.com/share?url=https%3a%2f%2fair.googol.im%2fpost%2fruby-style%2f&amp;text=Christian%20Neukirchen%20%e7%9a%84%20Ruby%20%e7%bc%96%e7%a8%8b%e9%a3%8e%e6%a0%bc%e6%8c%87%e5%8d%97&amp;via=googollee" target="_blank" title="Share on Twitter">
          <i class="iconfont icon-twitter"></i>
        </a>
        
      
      
      
      
      
      
      
      
        
      
        
      

          

          

          

          

</span>
                
            </p>

             
            <p class="copyright-item">
                Released under <a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-icon-tag"></i>: 
            
            <span class="tag"><a href="https://air.googol.im/tags/ruby/">
                    #ruby</a></span>
            
            <span class="tag"><a href="https://air.googol.im/tags/code-style/">
                    #code style</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();"></a></span> · 
                <span><a href="https://air.googol.im"></a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://air.googol.im/post/call-c-in-golang/" class="prev" rel="prev" title="Golang里调用C"><i class="iconfont icon-dajiantou"></i>&nbsp;Golang里调用C</a>
         
        
        <a href="https://air.googol.im/post/how-to-save-password/" class="next" rel="next" title="到底应该怎么存密码">到底应该怎么存密码&nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
          
          <div id="disqus_thread"></div>
  <script type="text/javascript">
      (function() {
          
          
          if (window.location.hostname == "localhost")
              return;
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          var disqus_shortname = 'air-g';
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

 

          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2004 - 2022</span>
        
         
            <span class="author" itemprop="copyrightHolder"><a href="https://air.googol.im">Googol Lee</a> | </span>
         

		  <span>Crafted with ❤️ by <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="external nofollow noopener noreffer">KeepIt</a> & <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a></span>
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  







     </div>
  </body>
</html>
